import{A as b,P as B,u as E,an as S,L as W,M as I,a8 as J,r as M,N as w,ao as H,a2 as z,C as F,E as x,a4 as L,J as G,ap as Q,b as U,aq as V}from"./DhAxoudj.js";import{c as Y}from"./CSKnhGNV.js";const X={trailing:!0};function Z(e,t=25,n={}){if(n={...X,...n},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let o,s,i=[],a,m;const d=(g,r)=>(a=$(e,g,r),a.finally(()=>{if(a=null,n.trailing&&m&&!s){const f=d(g,m);return m=null,f}}),a);return function(...g){return a?(n.trailing&&(m=g),a):new Promise(r=>{const f=!s&&n.leading;clearTimeout(s),s=setTimeout(()=>{s=null;const h=n.leading?o:d(this,g);for(const y of i)y(h);i=[]},t),f?(o=d(this,g),r(o)):i.push(r)})}}async function $(e,t,n){return await e.apply(t,n)}function ae(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;k(e[0],e[1])&&e.unshift(t);let[n,o,s={}]=e;const i=b(()=>B(n));if(typeof i.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof o!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const a=E();s.server??=!0,s.default??=A,s.getCachedData??=R,s.lazy??=!1,s.immediate??=!0,s.deep??=S.deep,s.dedupe??="cancel",s._functionName,a._asyncData[i.value];const m={cause:"initial",dedupe:s.dedupe};a._asyncData[i.value]?._init||(m.cachedData=s.getCachedData(i.value,a,{cause:"initial"}),a._asyncData[i.value]=q(a,i.value,o,s,m.cachedData));const d=a._asyncData[i.value];d._deps++;const g=()=>a._asyncData[i.value].execute(m),r=s.server!==!1&&a.payload.serverRendered;{let y=function(c){const l=a._asyncData[c];l?._deps&&(l._deps--,l._deps===0&&l?._off())};const u=G();if(u&&r&&s.immediate&&!u.sp&&(u.sp=[]),u&&!u._nuxtOnBeforeMountCbs){u._nuxtOnBeforeMountCbs=[];const c=u._nuxtOnBeforeMountCbs;Q(()=>{c.forEach(l=>{l()}),c.splice(0,c.length)}),U(()=>c.splice(0,c.length))}const D=u&&(u._nuxtClientOnly||V(Y,!1));r&&a.isHydrating&&(d.error.value||d.data.value!==void 0)?d.status.value=d.error.value?"error":"success":u&&(!D&&a.payload.serverRendered&&a.isHydrating||s.lazy)&&s.immediate?u._nuxtOnBeforeMountCbs.push(g):s.immediate&&d.status.value!=="success"&&g();const _=L(),v=W([i,...s.watch||[]],([c],[l])=>{if((c||l)&&c!==l){const P=a._asyncData[l]?.data.value!==void 0,N=a._asyncDataPromises[l]!==void 0;l&&y(l);const C={cause:"initial",dedupe:s.dedupe};if(!a._asyncData[c]?._init){let j;l&&P?j=a._asyncData[l]?.data.value:(j=s.getCachedData(c,a,{cause:"initial"}),C.cachedData=j),a._asyncData[c]=q(a,c,o,s,j)}a._asyncData[c]._deps++,(s.immediate||P||N)&&a._asyncData[c].execute(C)}else d._execute({cause:"watch",dedupe:s.dedupe})},{flush:"sync"});_&&I(()=>{v(),y(i.value)})}const f={data:p(()=>a._asyncData[i.value]?.data),pending:p(()=>a._asyncData[i.value]?.pending),status:p(()=>a._asyncData[i.value]?.status),error:p(()=>a._asyncData[i.value]?.error),refresh:(...y)=>a._asyncData[i.value].execute(...y),execute:(...y)=>a._asyncData[i.value].execute(...y),clear:()=>O(a,i.value)},h=Promise.resolve(a._asyncDataPromises[i.value]).then(()=>f);return Object.assign(h,f),h}function p(e){return b({get(){return e()?.value},set(t){const n=e();n&&(n.value=t)}})}function k(e,t){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof t=="function")}async function se(e){await new Promise(n=>J(n)),await E().hooks.callHookParallel("app:data:refresh",void 0)}function O(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=void 0),e._asyncData[t]&&(e._asyncData[t].data.value=x(e._asyncData[t]._default()),e._asyncData[t].error.value=void 0,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t]&&(e._asyncDataPromises[t].cancelled=!0),e._asyncDataPromises[t]=void 0)}function K(e,t){const n={};for(const o of t)n[o]=e[o];return n}function q(e,t,n,o,s){e.payload._errors[t]??=void 0;const i=o.getCachedData!==R,a=n,m=o.deep?M:w,d=s!==void 0,g=e.hook("app:data:refresh",async f=>{(!f||f.includes(t))&&await r.execute({cause:"refresh:hook"})}),r={data:m(d?s:o.default()),pending:b(()=>r.status.value==="pending"),error:H(e.payload._errors,t),status:w("idle"),execute:(...f)=>{const[h,y=void 0]=f,u=h&&y===void 0&&typeof h=="object"?h:{};if(e._asyncDataPromises[t]){if((u.dedupe??o.dedupe)==="defer")return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}{const _="cachedData"in u?u.cachedData:o.getCachedData(t,e,{cause:u.cause??"refresh:manual"});if(_!==void 0)return e.payload.data[t]=r.data.value=_,r.error.value=void 0,r.status.value="success",Promise.resolve(_)}r.status.value="pending";const D=new Promise((_,v)=>{try{_(a(e))}catch(c){v(c)}}).then(async _=>{if(D.cancelled)return e._asyncDataPromises[t];let v=_;o.transform&&(v=await o.transform(_)),o.pick&&(v=K(v,o.pick)),e.payload.data[t]=v,r.data.value=v,r.error.value=void 0,r.status.value="success"}).catch(_=>{if(D.cancelled)return e._asyncDataPromises[t];r.error.value=F(_),r.data.value=x(o.default()),r.status.value="error"}).finally(()=>{D.cancelled||delete e._asyncDataPromises[t]});return e._asyncDataPromises[t]=D,e._asyncDataPromises[t]},_execute:Z((...f)=>r.execute(...f),0,{leading:!0}),_default:o.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{g(),e._asyncData[t]?._init&&(e._asyncData[t]._init=!1),i||z(()=>{e._asyncData[t]?._init||(O(e,t),r.execute=()=>Promise.resolve())})}};return r}const A=()=>{},R=(e,t,n)=>{if(t.isHydrating)return t.payload.data[e];if(n.cause!=="refresh:manual"&&n.cause!=="refresh:hook")return t.static.data[e]},T={content_en:"v3.5.0--EkX_nyxGTDIoKoYgu04h27R1doJHLciA5S30mRX_7sY",content_fr:"v3.5.0--ArIk4YOaqOWHQwRPED4G20RbsxMgpEX0onnfnz17NFI",articles_en:"v3.5.0--GjOAiJL-bYzNAWfH3Cy9iybYmo7fGY3W-b4D7Adj70k",articles_fr:"v3.5.0--7KJitVVwR0KoH3ErWFwBw21vjxiquKjZPWxDQqkWx2A",projects_en:"v3.5.0--UJE3CIZL09b7oG4IEDC3CBAbR9RBWTftJPTnoJ4YOF0",projects_fr:"v3.5.0--o2dmEz0kR7jycWAudWWJI87vyGp6NwvSCp1sHyRo0LE",stack:"v3.5.0--Qmj4t2ByZyBR5ulc5-JwMa_PL_tVFcEqcS0Ety0ZRSo",faq_en:"v3.5.0--TgEwNOJM13trv2x9dkFz3-OxC1EgJ1X512r6gxbteeU",faq_fr:"v3.5.0--4W0Pfx9U0ojpvyfh7CzUW5mDq85zVyqlxt8e8Bk5i3Q"},ne={content_en:"_content_content_en",content_fr:"_content_content_fr",articles_en:"_content_articles_en",articles_fr:"_content_articles_fr",projects_en:"_content_projects_en",projects_fr:"_content_projects_fr",stack:"_content_stack",faq_en:"_content_faq_en",faq_fr:"_content_faq_fr",info:"_content_info"},ie={content_en:{type:"page",fields:{id:"string",title:"string",body:"json",date:"string",description:"string",extension:"string",head:"json",meta:"json",navigation:"json",ogImage:"json",path:"string",robots:"string",schemaOrg:"json",seo:"json",sitemap:"json",stem:"string"}},content_fr:{type:"page",fields:{id:"string",title:"string",body:"json",date:"string",description:"string",extension:"string",head:"json",meta:"json",navigation:"json",ogImage:"json",path:"string",robots:"string",schemaOrg:"json",seo:"json",sitemap:"json",stem:"string"}},articles_en:{type:"page",fields:{id:"string",title:"string",body:"json",date:"string",description:"string",extension:"string",head:"json",image:"string",meta:"json",navigation:"json",ogImage:"json",path:"string",readingTime:"string",robots:"string",schemaOrg:"json",seo:"json",sitemap:"json",stem:"string",tags:"json"}},articles_fr:{type:"page",fields:{id:"string",title:"string",body:"json",date:"string",description:"string",extension:"string",head:"json",image:"string",meta:"json",navigation:"json",ogImage:"json",path:"string",readingTime:"string",robots:"string",schemaOrg:"json",seo:"json",sitemap:"json",stem:"string",tags:"json"}},projects_en:{type:"data",fields:{id:"string",date:"string",extension:"string",featured:"boolean",image:"string",link:"string",meta:"json",name:"string",release:"string",stem:"string"}},projects_fr:{type:"data",fields:{id:"string",date:"string",extension:"string",featured:"boolean",image:"string",link:"string",meta:"json",name:"string",release:"string",stem:"string"}},stack:{type:"data",fields:{id:"string",extension:"string",items:"json",meta:"json",stem:"string"}},faq_en:{type:"data",fields:{id:"string",title:"string",extension:"string",faqQuestions:"json",meta:"json",stem:"string",subtitle:"string"}},faq_fr:{type:"data",fields:{id:"string",title:"string",extension:"string",faqQuestions:"json",meta:"json",stem:"string",subtitle:"string"}},info:{type:"data",fields:{}}};async function re(e,t){return await $fetch(`/__nuxt_content/${t}/sql_dump.txt`,{context:{},responseType:"text",headers:{"content-type":"text/plain"},query:{v:T[String(t)],t:void 0}})}async function oe(e,t,n){return await $fetch(`/__nuxt_content/${t}/query`,{context:e?{cloudflare:e.context.cloudflare}:{},headers:{"content-type":"application/json",...e?.node?.req?.headers?.cookie?{cookie:e.node.req.headers.cookie}:{}},query:{v:T[String(t)],t:void 0},method:"POST",body:{sql:n}})}export{T as a,re as b,ie as c,oe as f,se as r,ne as t,ae as u};
